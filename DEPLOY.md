# üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Æ –ù–ê –°–ï–†–í–ï–†–ï

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –ù–∞ –≤–∞—à–µ–º –ü–ö (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ):
‚úÖ –ò–∑–º–µ–Ω–µ–Ω—ã –∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `v2_glpi`, `v2_chatwoot`, –∏ —Ç.–¥.
‚úÖ –ò–∑–º–µ–Ω–µ–Ω—ã –¥–æ–º–µ–Ω—ã: `glpi2.yapomogu.com`, `chat2.yapomogu.com`

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å):

## üîß –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
cd /–ø—É—Ç—å/–∫/helpdesk-stack-npm

# –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø (–ù–ï –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–Ø —Å–∏—Å—Ç–µ–º—É!)
./backup.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω
ls -lh backups/
```

## üì¶ –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç A: Git (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/helpdesk-stack-npm
git pull origin main
```

**–í–∞—Ä–∏–∞–Ω—Ç B: SCP/SFTP (–µ—Å–ª–∏ –Ω–µ—Ç git)**
```bash
# –ù–∞ –≤–∞—à–µ–º –ü–ö (–∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã
ls -la

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp docker-compose.yml .env* *.sh README.md user@your-server:/path/to/helpdesk-stack-npm/

# –ò–ª–∏ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
rsync -avz --exclude='data/' --exclude='backups/' ./ user@your-server:/path/to/helpdesk-stack-npm/
```

## üåê –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å DNS –∏ NPM

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS:
–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤:
```
glpi2.yapomogu.com  ->  IP_–≤–∞—à–µ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞
chat2.yapomogu.com  ->  IP_–≤–∞—à–µ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx Proxy Manager:

**–î–ª—è GLPI2:**
```
Domain Names:     glpi2.yapomogu.com
Scheme:          http
Forward Hostname: v2_glpi
Forward Port:     80
Block Common Exploits: ‚úÖ
Websocket Support: ‚ùå
```

**SSL:**
- Request a new SSL Certificate (Let's Encrypt)
- Force SSL: ‚úÖ

**–î–ª—è Chat2:**
```
Domain Names:     chat2.yapomogu.com
Scheme:          http
Forward Hostname: v2_chatwoot
Forward Port:     3000
Block Common Exploits: ‚úÖ
Websocket Support: ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!!!
```

**SSL:**
- Request a new SSL Certificate (Let's Encrypt)
- Force SSL: ‚úÖ

## üöÄ –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/helpdesk-stack-npm

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
cat .env
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–æ–º–µ–Ω—ã changed to glpi2 –∏ chat2

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ
chmod +x *.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–µ—Ç—å npm_default —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
docker network ls | grep npm_default

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker compose up -d glpi_db chatwoot_db chatwoot_redis

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 60 —Å–µ–∫—É–Ω–¥
sleep 60

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ë–î healthy
docker compose ps

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ë–î Chatwoot
docker compose run --rm chatwoot bundle exec rails db:chatwoot_prepare

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker compose ps
```

## ‚úÖ –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:
```bash
docker compose ps

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã:
# v2_glpi            - healthy
# v2_glpi_db         - healthy
# v2_chatwoot        - healthy (–∏–ª–∏ starting)
# v2_chatwoot_db     - healthy
# v2_chatwoot_redis  - healthy
# v2_chatwoot_sidekiq - healthy
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
```bash
# GLPI
docker logs v2_glpi --tail 50

# Chatwoot
docker logs v2_chatwoot --tail 50

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏
docker logs v2_chatwoot 2>&1 | grep -i error
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
1. **GLPI**: https://glpi2.yapomogu.com
   - –î–æ–ª–∂–µ–Ω –æ—Ç–∫—Ä—ã—Ç—å—Å—è –º–∞—Å—Ç–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î:
     - –°–µ—Ä–≤–µ—Ä: `glpi_db`
     - –ë–∞–∑–∞: `glpi`
     - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `glpi`
     - –ü–∞—Ä–æ–ª—å: (–∏–∑ `.env`)

2. **Chatwoot**: https://chat2.yapomogu.com
   - –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è Super Admin
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üîÑ –®–∞–≥ 6: –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ GLPI

```bash
# –£–¥–∞–ª–∏—Ç–µ installer –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
docker exec v2_glpi rm /var/www/html/install/install.php
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã
./status.sh

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats v2_glpi v2_chatwoot v2_chatwoot_sidekiq

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f
```

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –∏ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
|----------|--------------|--------------|
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã | `glpi`, `chatwoot` | `v2_glpi`, `v2_chatwoot` |
| –î–æ–º–µ–Ω—ã | glpi.yapomogu.com | glpi2.yapomogu.com |
| | chat.yapomogu.com | chat2.yapomogu.com |
| –•—Ä–∞–Ω–µ–Ω–∏–µ | `./data/` (bind mounts) | Named volumes |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –ü–∞—Ä–æ–ª–∏ –≤ —Ñ–∞–π–ª–µ | –ü–∞—Ä–æ–ª–∏ –≤ .env |
| Health checks | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |
| Resource limits | ‚ùå –ù–µ—Ç | ‚úÖ –ï—Å—Ç—å |

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏:

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
cd /path/to/old-version
./backup.sh

# 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –±—ç–∫–∞–ø
cp backups/backup_YYYY-MM-DD_HH-MM.tar.gz /path/to/new-version/backups/

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É
cd /path/to/new-version
./restore.sh backup_YYYY-MM-DD_HH-MM.tar.gz
```

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

**–¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏!**

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å—Ç–∞—Ä—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd /path/to/old-version

# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –±—ç–∫–∞–ø
./backup.sh

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down

# –û—Å–≤–æ–±–æ–¥–∏—Ç–µ –ø–æ—Ä—Ç—ã –Ω–∞ NPM
# –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ proxy –¥–ª—è glpi.yapomogu.com –∏ chat.yapomogu.com
```

## ‚ö†Ô∏è –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
docker compose down

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
cd /path/to/old-version
docker compose up -d
```

## üìù Checklist —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø —Å—Ç–∞—Ä–æ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] DNS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- [ ] NPM –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤ —Å SSL
- [ ] WebSocket –≤–∫–ª—é—á–µ–Ω –¥–ª—è chat2.yapomogu.com
- [ ] –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω—ã –∏ healthy
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ Chatwoot –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] GLPI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] Chatwoot Super Admin —Å–æ–∑–¥–∞–Ω
- [ ] Installer GLPI —É–¥–∞–ª–µ–Ω
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ 24+ —á–∞—Å–∞
- [ ] –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üÜò –ü–æ–º–æ—â—å

**–ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã
docker system df
df -h

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å
docker network ls
```

**–ü—Ä–æ–±–ª–µ–º–∞: Chatwoot unhealthy**
```bash
# –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs v2_chatwoot --tail 100
```

**–ü—Ä–æ–±–ª–µ–º–∞: GLPI –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
docker ps | grep v2_glpi

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ NPM –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# Forward –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: v2_glpi:80
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker compose logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `./status.sh`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `cat README.md`
